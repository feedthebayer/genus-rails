<%= conversation_tag_helper(unread) do %>
  <%= render conversation.messages.first %>
  <% if conversation.length > 2 %>
    <p class="con-partition con-separator">
      <%= link_to_rest_of_conversation conversation %>
    </p>
  <% end %>
  <%= render conversation.messages.last if conversation.length > 1 %>
  <% if unread %>
    <p class="con-separator"><strong><%= link_for_mark_read conversation %></strong></p>
  <% end %>
  <section class="con-partition" id="new-message:<% conversation.id %>" data-turbolinks-temporary>
    <%= render partial: 'messages/reply_form',
        locals: { convo: conversation, message: new_msg } %>
  </section>
<% end %>
